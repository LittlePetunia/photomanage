{% extends "photomanage/base.html" %}
  
{% block title %}Photo Manager{% endblock %}
  
{% block content %}
<style>
.album {
  width: 640px;
  margin: 0 auto;
  padding: 5px;
  box-shadow: 0 1px 2px rgba(0,0,0,.3);
}

.album > div {
  position: relative;
  float: left;
  padding: 5px;
}

.album > div > img {
  display: block;
  width: 200px;
  transition: .1s transform;
  transform: translateZ(0); /* hack */
}

.album > div:hover {
  z-index: 1;
}

.album> div:hover > img {
  transform: scale(1.7,1.7);
  transition: .3s transform;
}

.cf:before, .cf:after {
  display: table;
  content: "";
  line-height: 0;
}

.cf:after {
  clear: both;
}
</style>
<script type="text/javascript">

	var HttpClient = function() {
    this.get = function(aUrl, aCallback) {
        var anHttpRequest = new XMLHttpRequest();
        anHttpRequest.onreadystatechange = function() { 
            if (anHttpRequest.readyState == 4 && anHttpRequest.status == 200)
                aCallback(anHttpRequest.responseText);
        }

        anHttpRequest.open( "GET", aUrl, true );            
        anHttpRequest.send( null );
    }
	}
	var client = new HttpClient();
	var all_photos;
	client.get('/get_all_photos/', function(response) {
		all_photos=response;
		var myJSONText = JSON.parse(response);
		var par = document.getElementById('imageDiv');
	
	for(var i=0;i<myJSONText.length;i++){
		var div = document.createElement("div");
		// div.class = "gallery-cell";
		// var img = document.createElement('img');
		var img=document.getElementById(myJSONText[i]['id'])
		img.src = myJSONText[i]['url'];
		img.alt=myJSONText[i]['id'];
		// div.appendChild(img);
		// par.appendChild(div);
	}
	});

	function reset(){
		client.get('/reset_category/', function(response) {
			new PNotify({
		        title: "Reset",
		        text: "All Categories reseted",
		        type: "success",
		        delay: 600
		      })
		});
		
	}

	function filter(code){
		var client = new HttpClient();
		var wildlife_photos;
		client.get('/get_photos_by_category/'+code.toString(), function(response) {
			wildlife_photos=response;
			var myJSONText = JSON.parse(response);
			var par = document.getElementById('album');
			par.innerHTML="";
		
		for(var i=0;i<myJSONText.length;i++){
			var div = document.createElement("div");
			var img = document.createElement('img');
			img.src = myJSONText[i]['url'];
			img.alt=myJSONText[i]['id'];
			div.appendChild(img)
			par.appendChild(div)
		}
		});

	}


	

</script>

<div class="panel panel-info">
 <div class="panel-body">
 	 <div class="row">
 		<div class="col-sm-3">
 			<div class="panel panel-info">
  				<div class="panel-heading">Categories</div>
  				<div class="panel-body">
  					<button type="button" class="btn btn-info" onclick="filter(1)">1. Wildlife</button>
  					<button type="button" class="btn btn-info" onclick="filter(2)">2. Portrait</button>
  				</div>
  				<div class="panel-body">
  					<button type="button" class="btn btn-danger" onclick="reset()">Reset</button>
  				</div>
			</div>
 		</div>
 		<div class="col-sm-9">
			<div id="imageDiv" class="gallery">
			  <div class="gallery-cell">
			    <img src="" id="1" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="2" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="3" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="4" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="5" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="6" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="7" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="8" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="9" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="10" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="11" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="12" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="13" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="14" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="15" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="16" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="17" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="18" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="19" />
			  </div>
			  <div class="gallery-cell">
			    <img src="" id="20" />
			  </div>
			</div>

 		</div>
 	</div>
 	<br>
 	<br>
 	<br>
 	<div class="row">
 		<div class="panel panel-info">
  				<div class="panel-heading">
  					Album by Categories
  				</div>
  				<div class="panel-body">
  					<div id="album" class="album cf"></div>
  				</div>
 		</div>
 	</div>
 
 {% csrf_token %}
 </div>
 </div>
</div>
{% endblock %}