<!DOCTYPE html>
<html>
<head>
 <title>{% block title %}Welcome to mysite{% endblock %}</title>
 {% load staticfiles %}
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
 <link rel="stylesheet" type="text/css" />
 <link rel="stylesheet" href="{% static 'css/photomanage.css' %}">
 <link rel="stylesheet" href="{% static 'flickity.css' %}">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pnotify/3.2.1/pnotify.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pnotify/3.2.1/pnotify.brighttheme.css">
  <script src="{% static 'js/flickity.pkgd.js' %}"></script>




 <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pnotify/3.2.1/pnotify.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pnotify/3.2.1/pnotify.animate.js"></script>

 <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<script type="text/javascript">
	var $current;
	jQueryBridget( 'flickity', Flickity, $ );
  	var $gallery;

  	$( document ).ready(function() {
	    $gallery=$('.gallery').flickity({
	    cellSelector: '.gallery-cell'
	  	})
	  	$current = $gallery.data('flickity');
	  	
	});

  	var next_button = document.getElementsByClassName("flickity-button flickity-prev-next-button next");

  	$(function(){
    $(next_button).on('click', function(){
       	$current = $gallery.data('flickity');
        console.log($current.selectedElement);
        console.log($current.selectedElement.childNodes[1].id);
       	
    	});
	});

  function noti(title,status){
    new PNotify({
        title: title,
        text: "Category "+title+" assigned",
        type:status,
        delay: 600
      })
  }
	

	document.addEventListener('keydown', function(event) {
    if(event.keyCode == 49) {
        var url = '/add_category/'+$current.selectedElement.childNodes[1].id+"/1"
        $.post( url );
        noti("Landscapes", "success");
    }
    else if(event.keyCode == 50) {
        var url = '/add_category/'+$current.selectedElement.childNodes[1].id+"/2"
        $.post( url );
        noti("People", "success");
    }
    else if(event.keyCode == 51) {
        var url = '/add_category/'+$current.selectedElement.childNodes[1].id+"/3"
        $.post( url );
        noti("City scapes", "success");
    }
    else if(event.keyCode == 52) {
        var url = '/add_category/'+$current.selectedElement.childNodes[1].id+"/4"
        $.post( url );
        noti("Still life", "success");
    }
    else if(event.keyCode == 53) {
        var url = '/add_category/'+$current.selectedElement.childNodes[1].id+"/5"
        $.post( url );
        noti("Animals", "success");
    }
  });

</script>
<body>
<div id="wrap">
<header>
 <h1><a href="{% url 'photomanage:home' %}">Manage Photo</a></h1>
</header>
  
<div id="content">
{% block content %}
  
{% endblock %}
</div>
</div>
</body>
</html>